

## 细节

### 高并发
### 读多写少

利用redis等缓存库存等信息

### 缓存
缓存进行预热。即事先把要进行秒杀的商品，同步到缓存中，这样商品基本都能直接从缓存中获取到，避免缓存击穿的问题
同时从数据库查询商品信息时要判断是不是要进行秒杀的商品，也能避免击穿问题。

### 库存

Redis INCR 命令用于对存储在 Redis 中的键进行自增操作。它适用于存储为整数的值，每次执行 INCR 命令，键的值将会增加1，并返回自增后的值。如果键不存在，则会创建一个新的键，并将其初始值设置为0

INCR 命令是原子操作，这意味着当多个客户端同时对同一个键执行 INCR 命令时，Redis 会确保操作的原子性。这意味着在多线程或并发环境下，不会出现竞态条件或数据不一致的情况。

INCR 命令的语法如下：
```redshift
INCR key
```

使用redis lua脚步扣减库存，能够保证原子性

### 分布式锁
### 异步处理
### 限流
1. 基于nginx限流, 同一个ip 1分钟 只能 5次请求
2. 计数器算法，每个用户 5分钟 5次请求
3. 令牌桶
4. 漏桶法
5. 加验证码，例如：移动滑块

### 页面静态化
1. 尽可能的减少不必要的服务端请求
2. 利用CDN就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率

### 秒杀按钮
1. 定时器，几秒内只能点一次按钮
2. 没开始活动时按钮是灰色的, 不可点击



## 提高门槛
有时候达到某个目的，不一定非要通过技术手段，通过业务手段也一样。

12306刚开始的时候，全国人民都在同一时刻抢火车票，由于并发量太大，系统经常挂。后来，重构优化之后，将购买周期放长了，可以提前20天购买火车票，并且可以在9点、10、11点、12点等整点购买火车票。调整业务之后（当然技术也有很多调整），将之前集中的请求，分散开了，一下子降低了用户并发量。  

通过提高业务门槛，比如只有会员才能参与秒杀活动，普通注册用户没有权限。或者，只有等级到达3级以上的普通用户，才有资格参加该活动。




